<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-1,2 Development kits (STSW-BLUENRG1-DK): Release Notes 2.4.0 / 14-June-2017 (BlueNRG-BLE Stack Library v2.0)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-1,2 Development kits (STSW-BLUENRG1-DK)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Release Notes 2.4.0 / 14-June-2017 (BlueNRG-BLE Stack Library v2.0) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="S1"></a>
New Features/Changes</h1>
<p>This section lists the new features/changes compared to previous BlueNRG-1 DK release: <br />
</p>
<ul>
<li>Added new <b>BlueNRG-BLE Stack Library</b> v2.0 binary file (libbluenrg1_stack.a): it supports Bluetooth Low Energy (BLE) V4.2 LE secure connections Privacy 1.2, new stack memory management module and it is valid for all the supported toolchains (IAR, KEIL, Atollic). </li>
<li>Updated bluerg1_api.h, bluenrg1_events.h, bluenrg1_stack.h: added support for new BLE stack v2.x framework. </li>
<li>Updated BlueNRG_Stack_Initialization_t BLE Radio Init parameters structure: <b> user is requested to align his *_config.h file when moving to BLE stack v2.0 </b> </li>
<li>Added new BlueNRG-1 Radio Parameters Wizard tool allowing to set the proper BLE stack radio initialization parameters and save them on his application configuration file (*_config.h file) </li>
<li>Updated BLE demonstration examples and sleep test projects for using the PKA driver, new BLE stack library binary file and related APIs and events callbacks (<b>refer to BLE stack migration guidelines from v1.x to v2.x html document </b>). </li>
<li>Updated DTM FW version to <b>1.9</b> (Added new commands/events for BlueNRG-1 stack 2.x, fixed error on DTM_boot.c, DTM_SystemInit() function, added functions for updater start and get firmware details): <b> user is requested to load this new version using the BlueNRG-1 Flasher utility </b>: <ul>
<li>
On BlueNRG-1, STEVAL-IDB007V1 platform, load Firmware\BLE_Examples\BlueNRG-1\DTM\DTM_16MHz.hex binary file </li>
</ul>
</li>
<li>Added BlueNRG1 PKA device drivers (BlueNRG1_pka.[c/h]) providing access to the BlueNRG-1 PKA features (Public Key Cryptography needer from Bluetooth low energy protocol stack v2.x)<ul>
<li>
NOTEs: <b> PKA driver must be added on BLE application project, since BLE stack v2.x requires it, and it must not be used by application during BLE pairing process </b></li>
</ul>
</li>
<li>Added a basic example for the BlueNRG-1 PKA device driver </li>
<li>Added BLE stack migration guidelines from v1.x to v2.x html document </li>
<li>Added BLE Stack Memory Manager html document </li>
<li>Added BlueNRG-1 DK key resources html document </li>
<li>Added new BLE_Security demonstration application for targeting some basic security examples </li>
<li>Added FLASH example </li>
<li>Added UART sleep mode support configuration to DTM project. </li>
<li>Added header file BlueNRG_x_device.h for selecting the proper device header file (BlueNRG1.h is default one) </li>
<li>Added SPI3 wires demonstration application and html documentation </li>
<li>Added SdkEvalComIOTxFifoNotEmpty() API on SDK_EVAL_Com.c file (it checks if the UART FIFO has data or not) </li>
<li>Added html framework to file ble_status.h </li>
<li>Added Master_Library_gatt_tx_pool_available_event_CB(), Master_Library_numeric_comparison_value_event() events callbacks to master/central library framework </li>
<li>Updated demo applications with App_SleepMode_Check() with check on SdkEvalComIOTxFifoNotEmpty() as further criteria for selecting proper low power modes </li>
<li>Updated BLE stack v2.0 release notes with information about stack code size, BTLE_StackTick() and RAL_Isr() timings </li>
<li>Updated DTM updater c files (SPI &amp; 32MHz) for aligning to the latest linker files </li>
<li>Updated Beacon, Chat and Sensor demo for removing reference to OTA framework (refer to Limitations section) </li>
<li>Updated linker files: reviewed RAM shared variables position (<b> user must use new linker files on his application when migrating his demo applications to new DK SW framework)</b> </li>
<li>Updated BlueNRG1_flash.h (N_PAGES definition) </li>
<li>Updated references to SPI MOSI, MISO to SPI IN, OUT on BlueNRG1_gpio.h, USER_Platform_Configuration_auto.h, SDK_EVAL_Config.c, SDK_EVAL_SPI.c files </li>
<li>Updated SDK_Eval-Com.c file for STM32L network coprocessor option (removed HAL_UART_RxCpltCallback(), HAL_UART_ErrorCallback(): added to each specific demo application). </li>
<li>Updated Atollic projects for using Atollic version 7.10 (it officially supports BlueNRG-1 device) </li>
<li>Updated IAR projects for using EWARM IAR version 7.70.1 (it officially supports BlueNRG-1 device </li>
<li>Updated ADC peripheral driver </li>
<li>Updated SPI driver for supporting Motorola and MicroWire frame format and added related example </li>
<li>Fixed threshold values on UART device driver </li>
<li>Enabled UART FIFO on SDK_EVAL_Com.c file </li>
<li>Reviewed SdkEvalUart_Send_Data() &amp; SdkEvalComIOUartIrqHandler() APIs on on SDK_EVAL_Com.c file </li>
<li>Updated packed_Advertising_Report_t structure (Data field size) on file bluenrg1_types.h and DTM_cmd_db.c file (DTM application) </li>
<li>Updated master library for supporting new BLE stack v2.x APIs, events callbacks and parameters framework </li>
<li>Updated linker files and crash_handler.h file framework for properly handling crash handler information storage section </li>
<li>Updated system_BlueNRG1.[c/h] for supporting device BOR enabling (preprocessor option to be enabled) </li>
<li>BlueNRG-1 datasheet Rev 3 published. </li>
<li>Bringing up the BlueNRG-1 device Rev4 published.</li>
</ul>
<ul>
<li>NOTES: <ul>
<li>
<b> Before using a STEVAL-IDB007V1 platform, align the USB to Serial DFU fw to the latest available version (v1.6) </b>: <ul>
<li>
In order to update the USB-to-SERIAL firmware version, the procedure provided on USB to Serial DFU FW upgrade document must be addressed. </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S11"></a>
Navigator PC applications</h2>
<ul>
<li>
BlueNRG-1 Navigator 2.4.0 supporting BlueNRG-1 device.</li>
</ul>
<h2><a class="anchor" id="S12"></a>
Flasher PC application</h2>
<ul>
<li>
BlueNRG-1 Flasher 2.4.0 supporting BlueNRG-1 device: <ul>
<li>
BlueNRG-1 kits platforms baudrate is fixed at 460800 bps.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S13"></a>
PC application/utilities (available on standalone SW packages)</h2>
<ul>
<li>Associated STSW-BNRGUI, BlueNRG GUI SW package 2.3.0 is provided: it contains the BlueNRG GUI PC application and script launcher utility supporting BlueNRG-1 devices. </li>
<li>BlueNRG current consumption estimation tool supporting BlueNRG-1 device is available on <a href="http://www.st.com/en/embedded-software/stsw-bnrg001.html">STSW-BNRG001</a> web page (GET SOFTWARE section).</li>
</ul>
<h2><a class="anchor" id="S14"></a>
Radio Parameters Wizard PC application</h2>
<ul>
<li>
BlueNRG-1 Radio Parameters Wizard supporting BlueNRG-1 device: <ul>
<li>
It allows to properly configure the BlueNRG_Stack_Initialization() API parameters in an user friendly way and to generate the related application *_config.h file to be used on user C application. </li>
<li>
Please refer to the following documents for more information about the BLE radio parameters to be configured: <ul>
<li>
BlueNRG-1 BLE Radio Parameters Wizard html documentation </li>
<li>
<a href="http://www.st.com/resource/en/programming_manual/dm00294449.pdf">BlueNRG-1 BLE stack programming guidelines (PM257) </a> </li>
<li>
BLE stack v2.x Stack Memory Manager html documentation </li>
<li>
GATT database size guidelines html documentation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S2"></a>
Solved Issues</h1>
<p>This section lists the solved issues compared to previous BlueNRG-1 DK release: <br />
</p>
<ul>
<li>ID 2377 Crystal selection in DTM UART and conflict with IFR tool of GUI </li>
<li>ID 2139 Script launcher support with DTM SPI mode </li>
<li>ID 2400 GPIO_WriteBit, GPIO_ResetBts and GPIO_SetBits are bugged </li>
<li>ID 2438 TX/RX event alert support on DTM FW </li>
<li>ID 2540 DTM - HS startup time max value </li>
<li>ID 1582 Crystal selection in DTM UART and conflict with IFR tool of GUI. </li>
<li>ID 1647 the issue for SDK_EVAL_Led.c: GPIO_WriteBit, GPIO_ResetBts and GPIO_SetBits to be updated. </li>
<li>ID 1583 Usage of low level functions for GPIO management </li>
<li>ID 1656 How to calculate the accuracy of ADC (ADC driver and conversion formula) </li>
<li>ID 1690 bluenrg1_types.h building error in BlueNRG-1 DK 2.3.0 examples with IAR 7.60 or later. </li>
<li>ID 1730 Chat server datarate (UART RX to be improved) </li>
<li>ID 1729 DTM UART SLEEP support </li>
<li>ID 1725 HS start up time measurement in AN4818 is unapplicable: new document revision is needed. </li>
<li>ID 1760 3-wired SPI configuration for BlueNRG-1 </li>
<li>ID 1835 UART drop RX data in a BLE enabled project </li>
<li>ID 1833 virtural timer trigg abornormal </li>
<li>ID 1809 BlueNRG-1 stress test over IO13 - BlueNRG-1 stucked (sleep management improvement is required) </li>
<li>ID 1868 BlueNRG-1 sometimes, stay sleep infinitely (sleep management improvement is required) </li>
<li>ID 1863 Flash ReadWord fails (dedicated API to be added) </li>
<li>ID 2674 packed_Advertising_Report_t firmware DTM updated for compliing issue with EWARM 7.60 or later </li>
<li>ID 2650 system_BlueNRG1.[c/h] documentation improvement </li>
<li>ID 2718 Flash Example to be added </li>
<li>ID 2726 UART - FIFO threshold are not correct </li>
<li>ID 2778 BlueNRG_Sleep API review </li>
<li>ID 2779 BlueNRG_Sleep API: no way to set gpio wake mask to zero </li>
<li>ID 2791 Add driver for PKA hardware block </li>
<li>ID 2854 BlueNRG-1 Flasher GUI baudrate documentation: it is fixed at 460800 bps. </li>
<li>ID 2862 ADC library - ADC BATT and TEMP formula </li>
<li>ID 2884 ANATEST0 and DIO14 are bounded together </li>
<li>ID 2978 Parser HEX file issue with BlueNRG-1 Flasher </li>
<li>ID 2981 RCO32K Trimming value on system_BlueNRG1.c file </li>
<li>ID 2985 LDO1V2 trimming value seetings on system_BlueNRG1.c file </li>
<li>ID 2794 Sleep management WFI issue </li>
<li>ID 2915 Nucleo - Network coprocessor reference firmware - fix to support STM32L4 MCU </li>
<li>ID 2786 BlueNRG-1 linker file Atollic does not use the RAM_RESERVED </li>
<li>ID 2885 STM32L-BlueNRG-1 netwrok coprocessor framework files improvements </li>
<li>ID 2954 Extra 0 byte given after HCI_RESET</li>
</ul>
<h1><a class="anchor" id="S3"></a>
SW Package Contents</h1>
<ul>
<li>
BlueNRG-1 Bluetooth Low Energy (BLE) stack binary library and header files </li>
<li>
BlueNRG-1 Bluetooth Low Energy (BLE) network coprocessor (SPI and UART mode) reference application (DTM)  </li>
<li>
BlueNRG-1 Bluetooth Low Energy stack APIs and events callbacks html documentation </li>
<li>
BlueNRG-1 Master/Central library APIs and html documentation </li>
<li>
BlueNRG-1 Bluetooth Low Energy demonstration applications (header, sources and toolchains projects) + html documentation </li>
<li>
BlueNRG-1 Bluetooth Low Energy demonstration applications prebuilt images </li>
<li>
BlueNRG-1 CMSIS files </li>
<li>
BlueNRG-1 peripherals drivers + html documentation </li>
<li>
BlueNRG-1 peripherals drivers examples (header, sources and toolchains projects) + html documentation </li>
<li>
BlueNRG-1 peripherals drivers examples prebuilt images </li>
<li>
BlueNRG-1 SDK and HAL drivers + html documentation </li>
<li>
BlueNRG-1 network coprocessor SPI protocol specification html document  </li>
<li>
BlueNRG-1 GATT database size guidelines html documentation </li>
<li>
BlueNRG-1 Applications debugging guidelinees html documentation </li>
<li>
BlueNRG-1 DK key resources html documentation </li>
<li>
Drivers for PC (USB Virtual COM) </li>
<li>
BlueNRG-1 Navigator PC application:  <ul>
<li>
It provides an interactive, simple and user friendly interface to the resources available within the BlueNRG-1 DK SW package: <ul>
<li>
BlueNRG-1 Bluetooth Low Energy (BLE) Demonstration Applications </li>
<li>
BlueNRG-1 Peripherals Drivers Examples </li>
<li>
BlueNRG-1 Development Kits </li>
<li>
Release Notes </li>
<li>
License Files</li>
</ul>
</li>
</ul>
</li>
<li>
BlueNRG-1 Flasher Utility PC application .  <ul>
<li>
It allows the BlueNRG-1 programming using the UART bootloader. </li>
</ul>
</li>
<li>
BlueNRG-1 Radio Parameters Wizard PC application <ul>
<li>
It allows the define the BlueNRG-1 radio initialization parameters. </li>
</ul>
</li>
<li>
STM32L - BlueNRG-1 network coprocessor framework example html documentation  </li>
<li>
STM32L - BlueNRG-1 network coprocessor APIs/events html documentation </li>
</ul>
<h2><a class="anchor" id="S31"></a>
Bluetooth Low Energy (BLE) demonstration applications</h2>
<ul>
<li>
The following BLE examples applications are available: <ol>
<li>
<b>BLE Beacon </b> application: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Release).</li>
</ul>
</li>
<li>
<b>BLE Chat </b> application: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Client, Server).</li>
</ul>
</li>
<li>
<b>BLE Chat Master &amp; Slave</b> application: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspace: Release). </li>
</ul>
</li>
<li>
<b>BLE HID/HOGP Mouse and Keyboard</b> applications: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: HID_Keyboard, HID_Mouse). </li>
</ul>
</li>
<li>
<b>BLE Power Consumption </b>example: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Release).</li>
</ul>
</li>
<li>
<b>BLE Remote Control </b>example: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Release).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo </b>application with acceleration and environmental sensors values (temperature &amp; pressure): <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Release).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo Central </b> which emulates the Sensor Demo applications available for smartphones (iOS and android): <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspace: Release.</li>
</ul>
</li>
<li>
<b>BLE Security </b> which shows some basic security examples : <ul>
<li>
Projects supporting BlueNRG-1 Development Kits </li>
<li>
Workspaces &amp; supported combinations: <ul>
<li>
Master_PassKey_Random &amp; Slave_PassKey_Random </li>
<li>
Master_PassKey_Fixed &amp; Slave_PassKey_Fixed </li>
<li>
Master_JustWorks &amp; Slave_JustWorks </li>
<li>
Master_NumericComp &amp; Slave_NumericComp (new pairing method supported only with LE Secure connections: BLE v4.2 security) </li>
</ul>
</li>
</ul>
</li>
<li>
<b>BLE Throughput </b> application: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Client &amp; Server unidirectional throughput, Client &amp; Server bidirectional throughput).</li>
</ul>
</li>
<li>
<b>BLE ANCS </b> application supporting the notification consumer profile role: <ul>
<li>
Projects supporting BlueNRG-1 Development Kits (workspace: Release).</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2><a class="anchor" id="S32"></a>
Bluetooth Low Energy (BLE) network coprocessor</h2>
<ul>
<li><b>DTM v1.9</b> application for network coprocessor mode (UART or SPI): <ul>
<li>
It supports network coprocessor configurations: UART (16MHz or 32MHz) and SPI. </li>
<li>
Projects supporting BlueNRG-1 Development Kits (workspaces: Release_SPI, Release_UART_16MHz, Release_UART_32MHz,Release_SPI_noboot,Release_UART_16MHz_noboot, Release_UART_32MHz_noboot). </li>
</ul>
</li>
</ul>
<ul>
<li><b>NOTES </b>: <ul>
<li>
<b> Before using a STEVAL-IDB007V1 platform as network coprocessor (UART or DTM), upgrade the DTM application to the latest available version (v1.9) </b>. <ul>
<li>
Prebuilt DTM binary images (DTM_SPI.hex, DTM_UART_16MHz.hex, DTM_UART_32MHz.hex) are available on Firmware//BLE_Examples/DTM folder and can be downloaded using the BlueNRG-1 Navigator or Flasher tool.</li>
</ul>
<ul>
<li>
The workspaces Release_SPI, Release_UART_16MHz, Release_UART_32MHz also include the bootloader/updater code which allows to upgrade the network coprocessor code with new FW versions using the BlueNRG GUI, Tools, BlueNRG Updater .... utility. </li>
<li>
The Release_SPI_noboot,Release_UART_16MHz_noboot, Release_UART_32MHz_noboot workspaces allow to build the DTM binary files to be used with the BlueNRG GUI, Tools, BlueNRG Updater .... utility provided the BlueNRG-1 kit is already configured as network coprocessor mode. </li>
<li>
<b> Release_UART_16MHz</b> is the network coprocessor UART configuration to be used for the <b> BlueNRG-1, STEVAL-IDB007V1</b> platform (DIO8 pin for UART TX and DIO11 pin for UART RX). </li>
<li>
When using the DTM SPI mode on a specific user platform, please make sure to select the proper High Speed Crystal (16MHz or 32MHz). </li>
<li>
The SPI network coprocessor configuration requires some HW changes on STEVAL-IDB007V1 platform (refer to the SPI protocol specification document which also describes the required BlueNRG-1 SPI lines). </li>
<li>
The BlueNRG GUI, Tools, BlueNRG Updater .... utility allows to upgrade only the Release_SPI_noboot,Release_UART_16MHz_noboot, Release_UART_32MHz_noboot DTM binary files. </li>
<li>
BlueNRG GUI PC application supporting BlueNRG-1 network coprocessor with updated DTM FW v1.9 is provided within the STSW-BNRGUI SW package v2.2.3 or later. </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S33"></a>
Peripheral drivers examples</h2>
<ul>
<li>
<p class="startli">The following Peripherals Drivers examples are available: </p><ol>
<li>
<b>ADC </b>examples: <ol>
<li>
DMA </li>
<li>
PDM </li>
<li>
Polling </li>
</ol>
</li>
<li>
<b>GPIO </b>examples: <ol>
<li>
Input Interrupt </li>
<li>
IO Toggle </li>
<li>
IO Wakeup </li>
</ol>
</li>
<li>
<b> FLASH </b> example: <ol>
<li>
Data Storage </li>
</ol>
</li>
<li>
<b>I2C </b> examples:<ol>
<li>
Master Polling </li>
<li>
Master Sensor (Dma, Polling &amp; Interrupt) </li>
<li>
Slave Polling </li>
<li>
Master DMA </li>
<li>
Slave DMA </li>
</ol>
</li>
<li>
<b>MFT </b>examples: <ol>
<li>
Mode 1 </li>
<li>
Mode 1a </li>
<li>
Mode 2 </li>
<li>
Mode 3 </li>
<li>
Mode 4 </li>
</ol>
</li>
<li>
<b>Micro </b>examples: <ol>
<li>
Hello World </li>
<li>
Sleep test</li>
</ol>
</li>
<li>
<b>PKA </b>examples: <ol>
<li>
DataEncrypt</li>
</ol>
</li>
<li>
<b>RTC </b>examples: <ol>
<li>
Clock watch </li>
<li>
Time Base </li>
<li>
Time Base Pattern</li>
</ol>
</li>
<li>
<b>SPI </b> examples:<ol>
<li>
Master Polling </li>
<li>
Master Sensor (Dma, Polling &amp; Interrupt) </li>
<li>
Slave Polling </li>
<li>
SPI 3 wires </li>
</ol>
</li>
<li>
<b> RNG </b> example: <ol>
<li>
Terminal </li>
</ol>
</li>
<li>
<b>SysTick </b>examples: <ol>
<li>
Time Base</li>
</ol>
</li>
<li>
<b>UART </b>examples: <ol>
<li>
Dma </li>
<li>
Interrupt </li>
<li>
Polling </li>
</ol>
</li>
<li>
<b>WDG </b>examples: <ol>
<li>
Reset </li>
<li>
Wakeup</li>
</ol>
</li>
</ol>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="S4"></a>
Development Toolchains</h1>
<ul>
<li>
IAR Embedded Workbench for ARM (EWARM) toolchain V7.70.1 or later. </li>
</ul>
<ul>
<li>
Keil uVision V5 (MDK-ARM) toolchain V5.17 </li>
<li>
NOTES: <ul>
<li>
For BlueNRG-1 device support, user is requested to install the official BlueNRG-1 Keil, MDK-ARM support files (Keil Pack version 1.2.0). Check on Keil web site for latest available BlueNRG-1 Keil pack version (1.2.0). </li>
<li>
Before installing a new Keil pack, please remove the current one. </li>
<li>
When opening a Keil project, please make sure the ST BlueNRG-1 or ST BlueNRG-2 has been already selected as device on Keil Debug tab as follow: <ul>
<li>
On Keil Project, Option for Target '...', Debug, Use tab, select ST-Link Debugger option; </li>
<li>
Open the associated Settings tab, select Flash Download and then Add button: select ST BlueNRG-1 or ST BlueNRG-2 Device Family Package according to the current selected device and press Add. </li>
<li>
The selected configuration can then be saved from File, Save All option (on file *.uvoptx). </li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
Atollic TrueStudio for ARM (GCC) toolchain V7.10 which supports BlueNRG-1 device </li>
<li>
NOTES: <ul>
<li>
When opening the Atollic project, in order to select the ST-LINK debugger and save it on local user Atollic workspace (Atollic preferences storage area), follow these steps: <ul>
<li>
Select the specific Atollic Active configuration and rebuild the project </li>
<li>
From Project, Build/Settings: Run/Debug Settings: New: <ul>
<li>
On Main tab: C\C++ Application: click on Search Project and select the elf file (i.e. Release\Release.elf) </li>
<li>
On Build Configuration tab select the specific workspace name (i.e: Release) </li>
<li>
On Debugger tab: Debug Probe, select ST-LINK </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S5"></a>
Supported platforms</h1>
<ul>
<li>
BlueNRG-1, STEVAL-IDB007V1 development kit (order code: STEVAL-IDB007V1).  </li>
<li>
NUCLEO-L152RE platform + BlueNRG-1, STEVAL-IDB007V1 configured as DTM network coprocessor (SPI mode).</li>
</ul>
<ul>
<li>NOTES: <ol>
<li>
When using a NUCLEO-L152RE platform, install the related ST-Link, ST-Link/V2, ST-Link/V2-1 USB driver (STSW-LINK009). </li>
<li>
When using a NUCLEO-L152RE platform, make sure the ST-Link firmware is updated to latest version available on ST web page. This can be checked/achieved by using the STM32 ST-LINK Utility v3.6.0 (or later): <ol>
<li>
Connect a NUCLEO-L152RE platform to a PC USB port </li>
<li>
Download and install STM32 ST-LINK Utility v3.6.0 (or later): it is available on ST web site (STSW-LINK004). </li>
<li>
Run the STM32 ST-LINK Utility v3.6.0 (or later). </li>
<li>
From Target menu, select Connect </li>
<li>
From ST-LINK menu, select Firmware Upgrade and Device Connect. Click on Yes &gt;&gt;&gt; tab for performing the ST-LINK firmware upgrade.</li>
</ol>
</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="S6"></a>
Known problems and limitations</h1>
<p>This section lists the issues known at release time. Issues found after this release are listed as solved or limitations on newer releases:<br />
</p>
<ul>
<li>ID 3067 OTA FW upgrade is not supported on BlueNRG-1 BLE stack v2.0 due to the increased BLE stack v2.x memory footprint required for addressing BLE v4.2 LE secure connections and Privacy 1.2 features. </li>
<li>ID 3077 Controller Privacy 1.2 is not supported when using a 16MHz crystal. </li>
<li>ID 2070 STEVAL-IDB007V1 development kits max output power is +6dBm. </li>
<li>ID 2071 BlueNRG-1, OTA framework is not supported when using Atollic, TrueStudio toolchain due to the limited optimization size of this toolchain, which doesn't fit with OTA framework memory layout. </li>
<li>ID 2089 If the DL2 led (BOOT pin) is high before the BlueNRG-1 goes to sleep, the pin level stays high (~2 V with 3.3 V of VDD). </li>
<li>ID 2524 SPI protocol - First byte of header. </li>
<li>ID 2639 Hardware Activation of DTM Updater (v1.7 or later, SPI mode) has been disabled. </li>
<li>ID 2384 DTM no boot image </li>
<li>ID 2524 SPI protocol - First byte of header </li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2021 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
