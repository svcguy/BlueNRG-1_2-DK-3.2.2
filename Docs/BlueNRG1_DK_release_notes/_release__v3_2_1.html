<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>BlueNRG-1,2 Development kits (STSW-BLUENRG1-DK): Release Notes 3.2.1 / 30-April-2020 (BlueNRG-BLE Stack Library v2.1c)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="STcustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ST-logo-small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueNRG-1,2 Development kits (STSW-BLUENRG1-DK)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Release Notes 3.2.1 / 30-April-2020 (BlueNRG-BLE Stack Library v2.1c) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="S1"></a>
New Features/Changes</h1>
<ul>
<li>
This section lists the new features/changes compared to previous BlueNRG-1_2 DK release: <br />
 <ul>
<li>
Added support for new <b>BlueNRG-BLE Stack Library</b> STMicroelectronics Bluetooth Low Energy (BLE) stack <b>v2.1c</b>. </li>
<li>
<p class="startli">Added reference to BlueNRG-1, BlueNRG-2 SDK compatibility matrixes Application Note (AN5495)</p>
<p class="endli"></p>
</li>
<li>
NOTES: <ul>
<li>
<b>Start menu folder for BlueNRG-1_2 SDK 3.2.1 SW package is as follow: ST BlueNRG-1_2 DK 3.2.1 </b><ul>
<li>
Library, Project, Utility folders are located under C:\Users\{Username}\ST\BlueNRG-1_2 DK 3.2.1 in order to be able to directly compile projects even with Windows User Account Control activated ("Release folder" under Start Menu provides direct access to these folders) </li>
<li>
If an Atollic project building fails due to missing file this is due to long path name: please copy user the BlueNRG-1_2 DK 3.2.1 Release folder under C:\ and make sure you have write permissions on it (disable Windows Account Control or run Atollic with Administrator rights). </li>
</ul>
</li>
<li>
<b> Before using a STEVAL-IDB007Vx (x = 1,1M,2), STEVAL-IDB008Vx (x= 1,1M,2), STEVAL-IDB00V9x (x= 1) platform, please align the <a href="../USB-to-SERIAL_FW_upgrade_procedure/USB-to-SERIAL_FW_upgrade_procedure.html">USB to Serial DFU fw </a> to the latest available version (v1.10) </b>. </li>
<li>
After upgrading the USB to Serial DFU fw, please unplug and replug again the STEVAL platform on a PC USB port, and wait for complete proper board recognition with associated PC drivers <ul>
<li>
<b> NOTE: </b> If the plugged platform is not recognized as a STMicroelectronics Virtual COM Port (Computer, Manage, System Tools, Device Manager, Ports (COM &amp; LPT)) or wrongly recognized as an USB Mass Storage Device on Universal Serial controllers (Computer, Manage, System Tools, Device Manager), please proceed with manual PC Virtual COM driver installation on detected wrong device, by selecting the <b>Update Driver Software</b> option, as described on Section Virtual COM driver installation: manual procedure, <b> <a href="#updatevcom">Step 3</a>.</b> </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S11"></a>
Navigator PC applications</h2>
<ul>
<li>
BlueNRG-1 Navigator 3.2.1 supporting BlueNRG-1 device. </li>
<li>
BlueNRG-2 Navigator 3.2.1 supporting BlueNRG-2 device.</li>
</ul>
<ul>
<li>
Supported platforms: <ul>
<li>
BlueNRG-132, STEVAL-IDB007V1 development kit (order code: STEVAL-IDB007V1 (NRND)).  </li>
<li>
BlueNRG-132, STEVAL-IDB007V2 development kit (order code: STEVAL-IDB007V2).  </li>
<li>
BlueNRG-232, STEVAL-IDB008V1 development kit (order code: STEVAL-IDB008V1).  </li>
<li>
BlueNRG-232, STEVAL-IDB008V2 development kit (order code: STEVAL-IDB008V2).  </li>
<li>
BlueNRG-232, STEVAL-IDB008V1M development kit (order code: STEVAL-IDB008V1M (coming next)).  </li>
<li>
BlueNRG-248, STEVAL-IDB009V1 development kit (order code: STEVAL-IDB009V1). </li>
</ul>
</li>
</ul>
<ul>
<li>
<b>NOTEs</b>:<ul>
<li>
BlueNRG1, STEVAL-IDB007V1M development kit is not supported on BlueNRG-1 Navigator PC application:<ul>
<li>
DO NOT use BlueNRG-1 Navigator PC application for downloading prebuilt binary images on such platform. </li>
</ul>
</li>
<li>
BlueNRG1, STEVAL-IDB007V1M prebuilt binary images available on Firmware folder can be downloaded using the "drag and drop" mass storage upgrade capability, or using the BlueNRG-1,2 Flasher Utility application available on <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/stsw-bnrgflasher.html">STSW-BNRGFLASHER SW package</a>. </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S12"></a>
Flasher PC application</h2>
<ul>
<li>
Since BlueNRG-1_2 SDK 3.0.0, BlueNRG-1 Flasher Utility has been removed from SDK: <ul>
<li>
New BlueNRG-1_2 Flasher PC utility supporting BlueNRG-1 and BlueNRG-2 devices (UART and SWD mode) is provided on a new standalone SW package <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/stsw-bnrgflasher.html">STSW-BNRGFLASHER</a> web page (GET SOFTWARE section).</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S13"></a>
PC application/utilities (available on standalone SW packages)</h2>
<ul>
<li>
Associated <a href="http://www.st.com/content/st_com/en/products/embedded-software/wireless-connectivity-software/stsw-bnrgui.html">STSW-BNRGUI</a>, BlueNRG GUI SW package is provided: it contains the BlueNRG GUI PC application and script launcher utility supporting BlueNRG-1, BlueNRG-2 devices. </li>
<li>
BlueNRG current consumption estimation tool supporting BlueNRG-1 device is available on <a href="http://www.st.com/en/embedded-software/stsw-bnrg001.html">STSW-BNRG001</a> web page (GET SOFTWARE section). </li>
</ul>
<h2><a class="anchor" id="S14"></a>
Radio Parameters Wizard PC application</h2>
<ul>
<li>
BlueNRG-X Radio Init Wizard 2.2.1 supporting BlueNRG-1, BlueNRG-2 devices and BLE stacks v2.0, v2.1, v2.1a, v2.1b/c: <ul>
<li>
It allows to properly configure the BlueNRG_Stack_Initialization() API parameters in an user friendly way and to generate the related application *_config.h file to be used on user C application. </li>
<li>
Please refer to the following documents for more information about the BLE radio parameters to be configured: <ul>
<li>
BlueNRG-X BLE Radio Init Wizard html documentation </li>
<li>
<a href="http://www.st.com/resource/en/programming_manual/dm00294449.pdf">BlueNRG-1,2 BLE stack programming guidelines (PM0257) </a> </li>
<li>
BLE stack v2.x Stack Memory Manager html documentation </li>
<li>
GATT database size guidelines html documentation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S2"></a>
Solved Issues</h1>
<ul>
<li>
This section lists the solved issues compared to previous BlueNRG-1_2 DK release: <br />
 <ul>
<li>
ID 5692: Missing FORCE_CORE_TO_16MHZ on the ADC examples with 32 MHz High Speed crystal </li>
<li>
ID 3673: BlueNRG-1,2 static stack - MEMORY_RAM_APP_OFFSET adjustment for KEIL, Atollic </li>
<li>
ID 6816: PRINT_FLOAT macro added for supporting the floating point for Atollic printf is not working properly </li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S3"></a>
SW Package Contents</h1>
<ul>
<li>
BlueNRG-1,2 Bluetooth Low Energy (BLE) stack binary library and header files </li>
<li>
BlueNRG-1,2 Bluetooth Low Energy (BLE) network coprocessor (SPI and UART mode) reference application (DTM)  </li>
<li>
BlueNRG-1,2 Bluetooth Low Energy stack APIs and events callbacks html documentation </li>
<li>
BlueNRG-1,2 Master/Central library APIs and html documentation </li>
<li>
BlueNRG-1,2 Bluetooth Low Energy demonstration applications (header, sources and toolchains projects) + html documentation </li>
<li>
BlueNRG-1,2 Bluetooth Low Energy demonstration applications prebuilt images </li>
<li>
BlueNRG-1,2 CMSIS files </li>
<li>
BlueNRG-1,2 peripherals drivers + html documentation </li>
<li>
BlueNRG-1,2 peripherals drivers examples (header, sources and toolchains projects) + html documentation </li>
<li>
BlueNRG-1,2 peripherals drivers examples prebuilt images </li>
<li>
BlueNRG-1,2 SDK and HAL drivers + html documentation </li>
<li>
BlueNRG-1,2 network coprocessor SPI protocol specification html document  </li>
<li>
BlueNRG-1,2 GATT database size guidelines html documentation </li>
<li>
BlueNRG-1,2 Applications debugging guidelines html documentation </li>
<li>
BlueNRG-1,2 DK key resources html documentation </li>
<li>
Drivers for PC (USB Virtual COM) </li>
<li>
BlueNRG-1,2 Navigator PC applications:  <ul>
<li>
It provides an interactive, simple and user friendly interface to the resources available within the BlueNRG-1_2 DK SW package: <ul>
<li>
BlueNRG-1,2 Bluetooth Low Energy (BLE) Demonstration Applications </li>
<li>
BlueNRG-1,2 Peripherals Drivers Examples </li>
<li>
BlueNRG-1,2 2.4 GHz Proprietary Radio Examples </li>
<li>
BlueNRG-1,2 Development Kits </li>
<li>
Release Notes </li>
<li>
License Files</li>
</ul>
</li>
</ul>
</li>
<li>
BlueNRG-X Radio Init Wizard PC application <ul>
<li>
It allows the define the BlueNRG-1,2 radio initialization parameters. </li>
</ul>
</li>
<li>
STM32L - BlueNRG-1,2 network coprocessor setup and framework html documentation (SPI, UART) </li>
<li>
STM32L - BlueNRG-1,2 network coprocessor APIs/events html documentation </li>
</ul>
<h2><a class="anchor" id="S31"></a>
Bluetooth Low Energy (BLE) demonstration applications</h2>
<ul>
<li>
The following BLE examples applications are available with related workspaces and BLE stack v2.1 modular configurations options for BLE_STACK_CONFIGURATION: <ol>
<li>
<b>BLE ANCS </b> application supporting the notification consumer profile role: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspace: Release [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Beacon </b> application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION], Use_OTA_ServiceManager [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Beacon with Flash Management</b> application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Beacon with FreeRTOS</b> application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Chat </b> application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Client [BLE_STACK_FULL_CONFIGURATION], Server [BLE_STACK_BASIC_CONFIGURATION], Server Lower &amp; Higher with OTA [BlueNRG-1_2: BLE_STACK_BASIC_CONFIGURATION], BlueNRG-2: BLE_OTA_BASIC_CONFIGURATION], Server with OTA Service Manager [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Chat Master &amp; Slave</b> application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspace: Release [BLE_STACK_FULL_CONFIGURATION]). </li>
</ul>
</li>
<li>
<b>BLE HID/HOGP Mouse and Keyboard</b> applications: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: HID_Keyboard [BLE_STACK_BASIC_CONFIGURATION], HID_Mouse [BLE_STACK_BASIC_CONFIGURATION]). </li>
</ul>
</li>
<li>
<b>BLE OTA Reset Manager </b> applications: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION], Service Manager [BlueNRG-1: BLE_STACK_BASIC_CONFIGURATION], BlueNRG-2: BLE_OTA_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Master and Slave with Formula </b> applications: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Master_Slave [BLE_STACK_FULL_CONFIGURATION], Master [BLE_STACK_FULL_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Power Consumption </b>example: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Privacy </b>application addressing BLE Controller Privacy feature (only with 32MHz HS crystal): <ul>
<li>
Projects supporting BlueNRG-2 Development Kits (workspaces: Master [BLE_STACK_FULL_CONFIGURATION], Slave [BLE_STACK_FULL_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Remote Control </b>example: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_FULL_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo </b>application with acceleration and environmental sensors values (temperature &amp; pressure): <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION], Lower &amp; Higher with OTA [BlueNRG-1: BLE_STACK_BASIC_CONFIGURATION], BlueNRG-2: BLE_OTA_BASIC_CONFIGURATION], Use OTA Service Manager [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo, BlueMS </b>application supporting ST BLE Sensor smarthphone app (previosly known as ST BlueMS): <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION]), Lower &amp; Higher with OTA [BlueNRG-1: BLE_STACK_BASIC_CONFIGURATION], BlueNRG-2: BLE_OTA_BASIC_CONFIGURATION], Use OTA Service Manager [BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>Fixed stack </b>project for generating the BLE fixed stack image: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_FULL_CONFIGURATION]; OTA_BTL_ResetManager [BLE_STACK_FULL_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo with Fixed stack </b>application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Release [BLE_STACK_BASIC_CONFIGURATION];Lower &amp; Higher with OTA [BlueNRG-1: BLE_STACK_BASIC_CONFIGURATION]).</li>
</ul>
</li>
<li>
<b>BLE Sensor Demo Central </b> which emulates the Sensor Demo applications available for smartphones (IOS and Android): <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspace: Release [BLE_STACK_FULL_CONFIGURATION]</li>
</ul>
</li>
<li>
<b>BLE Security </b> application which shows some basic security examples : <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits </li>
<li>
Workspaces &amp; supported combinations: <ul>
<li>
Master_PassKey_Random &amp; Slave_PassKey_Random [BLE_STACK_FULL_CONFIGURATION] </li>
<li>
Master_PassKey_Fixed &amp; Slave_PassKey_Fixed [BLE_STACK_FULL_CONFIGURATION] </li>
<li>
Master_JustWorks &amp; Slave_JustWorks [BLE_STACK_FULL_CONFIGURATION] </li>
<li>
Master_NumericComp &amp; Slave_NumericComp (new pairing method supported only with LE Secure connections: BLE v4.2 security) [BLE_STACK_FULL_CONFIGURATION] </li>
</ul>
</li>
</ul>
</li>
<li>
<b>BLE Throughput </b> application: <ul>
<li>
Projects supporting BlueNRG-1_2 Development Kits (workspaces: Client [BLE_STACK_FULL_CONFIGURATION] &amp; Server [BLE_STACK_BASIC_CONFIGURATION] unidirectional throughput, Client [BLE_STACK_FULL_CONFIGURATION] &amp; Server [BLE_STACK_BASIC_CONFIGURATION] bidirectional throughput).</li>
</ul>
</li>
<li>
<b>BLE Throughput with data length extension</b> application: <ul>
<li>
Projects supporting BlueNRG-2 with BLE stack v2.1 Development Kits (workspaces: Client [BLE_STACK_FULL_CONFIGURATION], Server [BLE_STACK_FULL_CONFIGURATION]).</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2><a class="anchor" id="S32"></a>
Bluetooth Low Energy (BLE) network coprocessor</h2>
<ul>
<li>
<p class="startli"><b>DTM v3.2</b> application for network coprocessor mode (UART or SPI): </p><ul>
<li>
It supports network coprocessor configurations: UART (16MHz or 32MHz) and SPI. </li>
<li>
Projects supporting BlueNRG-1,2 Development Kits (workspaces: SPI, UART, SPI_NOUPDATER, UART_NOUPDATER, UART_SLEEP, UART_Throughput). </li>
</ul>
<p class="endli"></p>
</li>
<li>
<b>NOTES </b>: <ul>
<li>
DTM v.3.2 available on BlueNRG-1,2 SDK v.3.2.1 has an offset of 0x2000 (8 KB). This image is not compatible with DTM_Updater image provided on previous SDK versions (offset = 0x800). In order to make it compatible with previous DTM_Updater versions, please rebuild the DTM UART or SPI configurations with linker symbol MEMORY_FLASH_APP_OFFSET=0x800. </li>
<li>
<b> Before using a STEVAL-IDB007Vx (x = 1,1M,2)/STEVAL-IDB008Vx (x = 1,1M,2)/STEVAL-IDB00V9x (x = 1) platform as network coprocessor (UART or DTM), upgrade the DTM application to the latest available version (v3.2) </b>. <ul>
<li>
Prebuilt DTM binary images (DTM_SPI.hex, DTM_UART.hex) are available on Firmware//BLE_Examples/DTM folder and can be downloaded using the BlueNRG-1,2 Navigator tools or Flasher tool. </li>
<li>
When using the DTM_SPI.hex binary image (SPI network coprocessor configuration), the following hardware changes must be done on the selected STEVAL platform: <ul>
<li>
Make a short at positions R59, R60, R61, R62 (if 0 ohm resistors are not already present).</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
The workspaces SPI, UART also include the bootloader/updater code which allows to upgrade the network coprocessor code with new FW versions using the BlueNRG GUI, Tools, Stack Updater .... utility. </li>
<li>
The SPI_NOUPDATER, UART_NOUPDATER workspaces allow to build the DTM binary files to be used with the BlueNRG GUI, Tools, Stack Updater .... utility provided the BlueNRG-1 kit is already configured as network coprocessor mode. </li>
<li>
When using the DTM application on a specific user platform, please make sure to select the proper High Speed Crystal (16MHz or 32MHz). </li>
<li>
The SPI network coprocessor configuration requires some HW changes on STEVAL-IDB007V1 platform if not already present (refer to the SPI protocol specification document which also describes the required BlueNRG-1 SPI lines). </li>
<li>
The BlueNRG GUI, Tools, Stack Updater .... utility allows to upgrade only the SPI_NOUPDATER, UART_NOUPDATER DTM binary files. </li>
<li>
BlueNRG GUI PC application supporting BlueNRG-1,2 network coprocessor with updated DTM FW v3.2 is provided within the STSW-BNRGUI SW package. </li>
<li>
DTM basic prebuilt binary images built with BLE_STACK_BASIC_CONFIGURATION option are also available on Firmware//BLE_Examples/DTM_basic folder. </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="S33"></a>
Peripheral drivers examples</h2>
<ul>
<li>
<p class="startli">The following Peripherals Drivers examples are available: </p><ol>
<li>
<b>ADC </b>examples: <ol>
<li>
DMA </li>
<li>
PDM </li>
<li>
Polling </li>
</ol>
</li>
<li>
<b>GPIO </b>examples: <ol>
<li>
Input Interrupt </li>
<li>
IO Toggle </li>
<li>
IO Wakeup </li>
<li>
IO low power modes </li>
</ol>
</li>
<li>
<b> FLASH </b> example: <ol>
<li>
Data Storage </li>
</ol>
</li>
<li>
<b>I2C </b> examples:<ol>
<li>
Master Polling </li>
<li>
Master Sensor (Dma, Polling &amp; Interrupt) </li>
<li>
Slave Polling </li>
<li>
Master DMA </li>
<li>
Slave DMA </li>
</ol>
</li>
<li>
<b>MFT </b>examples: <ol>
<li>
Mode 1 </li>
<li>
Mode 1a </li>
<li>
Mode 2 </li>
<li>
Mode 3 </li>
<li>
Mode 4 </li>
<li>
SW PWM </li>
</ol>
</li>
<li>
<b>Micro </b>examples: <ol>
<li>
Hello World </li>
<li>
Sleep test</li>
</ol>
</li>
<li>
<b>PKA </b>examples: <ol>
<li>
DataEncrypt</li>
</ol>
</li>
<li>
<b>2.4 GHZ proprietary radio </b>examples: <ol>
<li>
Automatic Channel Management </li>
<li>
Beep </li>
<li>
Beep multi state </li>
<li>
Chat </li>
<li>
Chat with Encryption </li>
<li>
Remote Control </li>
<li>
Sleep (TX, RX, RX_Vtimer) </li>
<li>
Sniffer </li>
<li>
Sniffer multi state </li>
<li>
TX, RX </li>
<li>
TX, RX double packet </li>
<li>
Star network (master and slave roles) </li>
<li>
OTA Reset Manager with Client, Server configuration </li>
<li>
Throughput demo </li>
</ol>
</li>
<li>
<b> RNG </b> example: <ol>
<li>
Terminal </li>
</ol>
</li>
<li>
<b>RTC </b>examples: <ol>
<li>
Clock watch </li>
<li>
Time Base </li>
<li>
Time Base Pattern </li>
<li>
RTC with Virtual Timer</li>
</ol>
</li>
<li>
<b>SPI </b> examples:<ol>
<li>
Master Polling </li>
<li>
Master Sensor (Dma, Polling &amp; Interrupt) </li>
<li>
Slave Polling </li>
<li>
SPI 3 wires </li>
</ol>
</li>
<li>
<b>SysTick </b>examples: <ol>
<li>
Time Base</li>
</ol>
</li>
<li>
<b>UART </b>examples: <ol>
<li>
Dma </li>
<li>
Interrupt </li>
<li>
Polling </li>
<li>
RX Timeout</li>
</ol>
</li>
<li>
<b>WDG </b>examples: <ol>
<li>
Reset </li>
<li>
Wakeup</li>
</ol>
</li>
</ol>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="S4"></a>
Development Toolchains</h1>
<ul>
<li>
IAR Embedded Workbench for ARM (EWARM) toolchain V8.40.1 or later. </li>
<li>
Keil uVision V5 (MDK-ARM) toolchain V5.27.1 </li>
<li>
NOTES: <ul>
<li>
If not already installed, foor BlueNRG-1 device support, user is requested to install the official BlueNRG-1 Keil, MDK-ARM support files (Keil Pack version 1.2.0) and BlueNRG-2 Keil, MDK-ARM support files (Keil Pack version 1.0.0). Check on Keil web site for available BlueNRG-1, BlueNRG-2 Keil packs version. </li>
<li>
Before installing a new Keil pack, please remove the current used one. </li>
<li>
When opening a Keil project, please make sure the ST BlueNRG-1 or ST BlueNRG-2 has been already selected as device on Keil Debug tab as follow: <ul>
<li>
On Keil Project, Option for Target '...', Debug, Use tab, select ST-Link Debugger option; </li>
<li>
Open the associated Settings tab, select Flash Download and then Add button: select ST BlueNRG-1 or ST BlueNRG-2 Device Family Package according to the current selected device and press Add. </li>
<li>
The selected configuration can then be saved from File, Save All option (on file *.uvoptx). </li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
Atollic TrueStudio for ARM (GCC) toolchain <b><a href="https://atollic.com/release-news/atollic-truestudio-8-1-0-released/">V8.1.0 </a></b> which supports both BlueNRG-1 and BlueNRG-2 devices. </li>
<li>
Atollic TrueStudio for ARM (GCC) patch available on Utility folder (Atollic_8_1_0_ST-Link_patch_BlueNRG-1_2_Win_V1.0.zip) must be also installed (refer to Solved Issue: ID 5594) </li>
<li>
<p class="startli">NOTES: </p><ul>
<li>
When opening the Atollic project, in order to select the ST-LINK debugger and save it on local user Atollic workspace (Atollic preferences storage area), follow these steps:<ul>
<li>
Select the specific Atollic Active configuration and rebuild the project </li>
<li>
From Project, Build/Settings: Run/Debug Settings: New: <ul>
<li>
On Main tab: C\C++ Application: click on Search Project and select the elf file (i.e. Release\Release.elf) </li>
<li>
On Build Configuration tab select the specific workspace name (i.e: Release) </li>
<li>
On Debugger tab: Debug Probe, select ST-LINK </li>
</ul>
</li>
</ul>
</li>
<li>
When opening an Atollic project, please double check if the target MCU is correctly selected as follow:<ul>
<li>
From Project, Build/Settings: C/C++ Build, Settings, select Target Settings: <ul>
<li>
On Target, Device select STMicroelectronics, MCUs, BlueNRG-1 devices or BlueNRG-2 devices and, respectively, BlueNRG-132 or BlueNRG-232. </li>
<li>
If wrong target MCU is still referred on linker command line, please unselect the current device, selet another one and then select again the correct one: BlueNRG-132 or BlueNRG-232</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="S5"></a>
Supported platforms</h1>
<ul>
<li>
BlueNRG-132, STEVAL-IDB007V1 development kit with 16MHz HS crystal (order code: STEVAL-IDB007V1 (NRND)).  </li>
<li>
BlueNRG-132, STEVAL-IDB007V2 development kit with 16MHz HS crystal (order code: STEVAL-IDB007V2).  </li>
<li>
BlueNRG-1, STEVAL-IDB007V1M evaluation platform based on the SPBTLE-1S module with 32MHz HS crystal (order code: STEVAL-IDB007V1M): <ul>
<li>
BlueNRG-134 (WCSP34), SPBTLE-1S module has a 32MHz HS crystal with 32MHz; </li>
<li>
PUSH1 button is not connected to any IO (IO13 is not present on BlueNRG-134): as consequence, this button is not usable on all the SDK demos requesting it.</li>
</ul>
</li>
<li>
BlueNRG-232, STEVAL-IDB008V1M evaluation platform based on the BlueNRG-M2SA module with 32MHz HS crystal (order code: STEVAL-IDB008V1M (<b>coming next</b>)): <ul>
<li>
PUSH1 button is not connected to any IO (IO13 is not available on BlueNRG-M2SA): as consequence, this button is not usable on all the SDK demos requesting it.</li>
</ul>
</li>
<li>
BlueNRG-232, STEVAL-IDB008V1 development kit with 32MHz HS crystal (order code: STEVAL-IDB008V1).  </li>
<li>
BlueNRG-232, STEVAL-IDB008V2 development kit with 32MHz HS crystal (order code: STEVAL-IDB008V2).  </li>
<li>
BlueNRG-248, STEVAL-IDB009V1 development kit with 32MHz HS crystal (order code: STEVAL-IDB009V1).  </li>
<li>
NUCLEO-L476RG platform + BlueNRG-1/STEVAL-IDB007Vx (x=1,1M,2) or BlueNRG-2/STEVAL-IDB002Vx (x=1,1M,2), STEVAL-IDB00V9x (x = 1) configured as DTM network coprocessor (SPI, UART mode).</li>
</ul>
<p>NOTES: </p><ol>
<li>
When using a NUCLEO-L476RG platform, install the related ST-Link, ST-Link/V2, ST-Link/V2-1 USB driver (STSW-LINK009). </li>
<li>
When using a NUCLEO-L476RG platform, make sure the ST-Link firmware is updated to latest version available on ST web page. This can be checked/achieved by using the STM32 ST-LINK Utility v3.6.0 (or later): <ol>
<li>
Connect a NUCLEO-L476RG platform to a PC USB port </li>
<li>
Download and install STM32 ST-LINK Utility v3.6.0 (or later): it is available on ST web site (STSW-LINK004). </li>
<li>
Run the STM32 ST-LINK Utility v3.6.0 (or later). </li>
<li>
From Target menu, select Connect </li>
<li>
From ST-LINK menu, select Firmware Upgrade and Device Connect. Click on Yes &gt;&gt;&gt; tab for performing the ST-LINK firmware upgrade.</li>
</ol>
</li>
</ol>
<h1><a class="anchor" id="S6"></a>
Known problems and limitations</h1>
<ul>
<li>
This section lists the issues known at release time. Issues found after this release are listed as solved or limitations on newer releases:<br />
 <ul>
<li>
ID 2411: ADC issue on accessing ADC APB registers when device is clocked with the 32 MHz: <ul>
<li>
Suggested workaround: user should set the preprocessor option FORCE_CORE_TO_16MHZ=1, in order to configure the system clock to 16MHz when using ADC IP on his application scenario. </li>
<li>
NOTE: SDK 3.0.0 SW workaround on ADC driver (preprocessor option: ADC_2411=1) has been removed since it could impact ongoing BLE radio or 2.4 GHz proprietary radio activities leading to radio hanging. </li>
</ul>
</li>
<li>
ID 2488 BlueNRG-1 device is not supported on Atollic release v9.x: <ul>
<li>
<a href="https://atollic.com/release-news/atollic-truestudio-8-1-0-released/">Atollic v8.1.0 </a> supporting BlueNRG-1, BlueNRG-2 devices is available on Atollic web site</li>
</ul>
</li>
<li>
ID 3077: Controller Privacy 1.2 is not supported when using a 16MHz crystal. </li>
<li>
ID 2070: STEVAL-IDB007Vx (x = 1,1M,2),STEVAL-IDB008Vx (x = 1,2), STEVAL-IDB00V9x (x = 1) development kits max output power is +6dBm. </li>
<li>
ID 2071: OTA framework is not supported when using Atollic, TrueStudio toolchain. </li>
<li>
ID 2089: If the DL2 led (BOOT pin) is high before the BlueNRG-1,2 goes to sleep, the pin level stays high (~2 V with 3.3 V of VDD). </li>
<li>
ID 2653: Intermediate Pull is present in BlueNRG-1 when chip wakes up or goes to sleep. </li>
<li>
ID 5471: DTM UART Updater doesn't support UART HW flow control mode. </li>
<li>
ID 5487: STEVAL-IDB00{7/8}V1M, PUSH1 button (IO13) is not usable on BlueNRG-1,2 SDK demonstrations applications with related implications (Sleep_Test, BLE Use_with_OTA_ServiceManager projects configurations, BLE_Security, BLE_Privacy, BLE HID mouse, GPIO Setting in Low Power Mode, ...): <ul>
<li>
On STEVAL-IDB00{7/8}V1M platform, BLE_Beacon, BLE_Chat, BLE_SensorDemo Use_with_OTA_ServiceManager projects configurations, the BLE OTA Service Manager can be activated through the PUSH2 button. </li>
</ul>
</li>
<li>
ID 5570: BlueNRG-1,2 STEVAL platforms Drag &amp; Drop firmware upgrade failure on Windows 10 (First upgrade is OK; next one doesn't work: user must unplug and plug again the connected platform). </li>
<li>
ID 5592: Application should not change value of AHBUPCONV register while radio operation are in progress. </li>
<li>
ID 5832: Battery mode - LSM6DS3 cannot work if R59, R60 and R62 resistors are mounted. </li>
<li>
ID 6708: Network coprocessor application with UART HW Flow Control issue when there is an asynchronous full duplex communication. </li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="S7"></a>
Virtual COM driver installation: manual procedure</h1>
<ul>
<li>
During the BlueNRG-1_2 DK Development kits (STSW-BLUENRG1-DK) SW package installation procedure, the PC Virtual COM driver installation is also automatically started, in order to properly recognize STEVAL-IDB007Vx, STEVAL-IDB008Vx, STEVAL-IDB00V9x platforms. </li>
<li>
If the automatic PC Virtual COM driver installation procedure fails, in order to properly recognize a plugged STEVAL-IDB007Vx, STEVAL-IDB008Vx platform, user should manually install the driver by following this procedure: <ol>
<li>
Go to PC, Windows Device Manager. </li>
<li>
Look for "Other devices" tab: on the available reported device, related to the not recognized STEVAL-IDB007Vx, STEVAL-IDB008Vx, STEVAL-IDB00V9x device (label: Unknown Device or STMicroelectronics). </li>
<li>
Right click on mouse and select <b>Update Driver Software</b> option. </li>
<li>
<a class="anchor" id="updatevcom"></a> <b>Browse to BlueNRG-1_2 DK Development kits installation folder </b> (default path is C: Files (x86)-1_2 DK x.x.x) and select PCDriver\Virtual COM Port Driver and proceed with "Next" button. </li>
<li>
If asked, allow the driver installation by selecting: "Install this driver software anyway" option. </li>
<li>
Driver installation is completed and STEVAL-IDB007Vx, STEVAL-IDB008Vx, STEVAL-IDB00V9x platforms are correctly recognized and reported on Device Manager, Ports (COM &amp; LPT) tab, with associated COM port number.</li>
</ol>
</li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2021 by STMicrolectronics. All rights reserved.<br>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
